<% content_for :title, @exercise_plan.name.presence || "Exercise plan" %>

<div class="w-full max-w-3xl mx-auto">
  <% if notice.present? %>
    <p class="mb-6 rounded-xl bg-green-100 text-green-800 px-4 py-3 border border-green-200 font-medium" id="notice">
      <%= notice %>
    </p>
  <% end %>

  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3 mb-6">
    <div>
      <p class="text-sm text-yellow-800">Exercise plan</p>
      <h1 class="text-4xl font-extrabold text-yellow-900 leading-tight">
        <%= @exercise_plan.name.presence || "Untitled plan" %>
      </h1>

      <% if @exercise_plan.description.present? %>
        <p class="mt-2 text-yellow-800">
          <%= @exercise_plan.description %>
        </p>
      <% end %>

      <div class="mt-3 flex items-center gap-2 flex-wrap">
        <span class="inline-flex items-center rounded-full bg-gray-100 text-gray-700 px-3 py-1 text-sm font-semibold">
          <%= pluralize(@exercise_plan.exercise_plan_items.size, "exercise") %>
        </span>

      </div>
    </div>

    <!-- Actions (desktop only) -->
    <div class="hidden sm:flex flex-row gap-2 items-center">
      <%= link_to "Back", exercise_plans_path,
        class: "text-center rounded-lg px-4 py-2 bg-yellow-100 text-yellow-900 font-semibold hover:bg-yellow-200 transition cursor-pointer" %>

      <%= link_to "Edit", edit_exercise_plan_path(@exercise_plan),
        class: "text-center rounded-lg px-4 py-2 bg-gray-100 text-gray-800 font-semibold hover:bg-gray-200 transition cursor-pointer" %>

      <%= button_to "Delete", @exercise_plan, method: :delete,
        form_class: "inline",
        class: "text-center rounded-lg px-4 py-2 bg-red-600 text-white font-semibold hover:bg-red-500 transition cursor-pointer",
        data: { turbo_confirm: "Are you sure?" } %>
    </div>
  </div>

  <!-- Items card -->
  <div class="mt-5 bg-white rounded-2xl shadow-sm border border-yellow-100 p-6">
    <h2 class="text-lg font-extrabold text-yellow-900 mb-4">Exercises</h2>

    <% if @exercise_plan.exercise_plan_items.any? %>
      <div class="space-y-4">
        <%= render @exercise_plan.exercise_plan_items %>
      </div>
    <% else %>
      <p class="text-yellow-800">No exercises added yet.</p>
    <% end %>
  </div>

  <!-- Actions (mobile only) -->
  <div class="mt-6 flex flex-col sm:hidden gap-2">
    <%= link_to "Back", exercise_plans_path,
      class: "text-center rounded-lg px-4 py-2 bg-yellow-100 text-yellow-900 font-semibold hover:bg-yellow-200 transition cursor-pointer" %>

    <%= link_to "Edit", edit_exercise_plan_path(@exercise_plan),
      class: "text-center rounded-lg px-4 py-2 bg-gray-100 text-gray-800 font-semibold hover:bg-gray-200 transition cursor-pointer" %>

    <%= button_to "Delete", @exercise_plan, method: :delete,
      form_class: "inline",
      class: "text-center rounded-lg px-4 py-2 bg-red-600 text-white font-semibold hover:bg-red-500 transition cursor-pointer",
      data: { turbo_confirm: "Are you sure?" } %>
  </div>
</div>
