<%= form_with(model: exercise_plan, class: "contents", data: { controller: "ai-confirm" }) do |form| %>

  <%= render "shared/error_messages", resource: @exercise_plan %>

  <div class="my-5">
    <%= form.label :prompt %>
    <%= form.text_area :prompt, rows: 4, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full", {"border-gray-400 focus:outline-blue-600": exercise_plan.errors[:description].none?, "border-red-400 focus:outline-red-600": exercise_plan.errors[:description].any?}] %>
  </div>

  <div class="inline">
    <%= form.submit formaction: generate_exercise_plans_path, data: { action: "click->ai-confirm#openIfDirty" }, class: "w-full sm:w-auto rounded-md px-3.5 py-2.5 bg-blue-600 hover:bg-blue-500 text-white inline-block font-medium cursor-pointer" %>
  </div>

  <!-- Modal -->
  <dialog data-ai-confirm-target="dialog" class="rounded-xl p-6 backdrop:bg-black/40">
    <p class="text-sm">
      This will overwrite the current form. Continue?
    </p>
    <div class="mt-4 flex gap-2 justify-end">
      <button type="button" data-action="click->ai-confirm#cancel" class="px-3 py-2 border rounded">
        Cancel
      </button>
      <button type="button" data-action="click->ai-confirm#proceed" class="px-3 py-2 bg-red-600 text-white rounded">
        Yes, overwrite
      </button>
    </div>
  </dialog>

<% end %>
